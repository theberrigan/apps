<ng-container [ngSwitch]="action" *ngIf="isReady">
    <token-handler *ngSwitchCase="'handle-token'" (onAfterSignIn)="onAfterSignIn()"></token-handler>
    <div class="auth__table" *ngSwitchDefault>
        <div class="auth__table-row">
            <div class="auth__table-cell auth__table-cell_small">
                <div class="auth__logo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 159 36" class="auth__logo-img">
                        <g style="fill: #fff;">
                            <path d="M25.8592,0H10.1408A10.1477,10.1477,0,0,0,0,10.1408V25.8592A10.1477,10.1477,0,0,0,10.1408,36H25.8592A10.1477,10.1477,0,0,0,36,25.8592V10.1408A10.1477,10.1477,0,0,0,25.8592,0ZM20.8445,26.3916c-3.098,0-4.6191-.9127-7.2253-.92A6.909,6.909,0,0,0,9.7606,26.493s.3486-4.2047,5.4988-4.2047c3.2476.0216,4.135.9089,7.2507.919a7.3391,7.3391,0,0,0,3.7293-1.0242S25.8427,26.3916,20.8445,26.3916Zm0-6.3381c-3.098,0-4.6191-.9127-7.2253-.92a6.909,6.909,0,0,0-3.8586,1.0217s.3486-4.2046,5.4988-4.2046c3.2476.0215,4.135.9089,7.2507.919a7.3391,7.3391,0,0,0,3.7293-1.0242S25.8427,20.0535,20.8445,20.0535Zm0-6.338c-3.098,0-4.6191-.9127-7.2253-.92a6.909,6.909,0,0,0-3.8586,1.0217s.3486-4.2046,5.4988-4.2046c3.2476.0215,4.135.9088,7.2507.919A7.34,7.34,0,0,0,26.2394,9.507S25.8427,13.7155,20.8445,13.7155Z"></path>
                            <path d="M158.6009,11.0937q-.02.8033-.0707,1.6162t-.1511,1.6361h-.5243l-.8266-2.2084h-4.3954v5.32h3.2864l.7864-1.4857h.5041a34.0349,34.0349,0,0,1,0,4.0554h-.5041l-.7864-1.5258h-3.2864v5.6014H157.27l.988-2.4092h.504q.141.8433.2017,1.7065a15.137,15.137,0,0,1,.02,1.7467h-9.94v-.5822a6.7049,6.7049,0,0,1,1.6532-.4819V12.1777a8.1916,8.1916,0,0,1-.8265-.2107q-.4236-.13-.8267-.2911v-.5822Z"></path>
                            <path d="M141.2957,11.0937h4.4558v.5822a7.2713,7.2713,0,0,1-.7864.3011q-.3831.12-.7459.2007l-4.0526,5.34q.5037.6625,1.1593,1.4857T142.697,20.7q.7154.8733,1.4718,1.7668t1.4819,1.6964l.9678.4818v.502h-2.52l-.6856-.4818q-1.19-1.3854-2.3691-2.9914t-2.2884-3.2525h-.988v5.6616a4.9119,4.9119,0,0,1,1.5123.4819v.5822h-5.1011v-.5822a9.0158,9.0158,0,0,1,1.6533-.4819V12.1777a5.0633,5.0633,0,0,1-1.6533-.5018v-.5822H139.28v.5822q-.323.1407-.7058.2711t-.8065.2307V17.739l1.21-.281,3.77-5.28q-.4038-.1-.7662-.2208a5.2021,5.2021,0,0,1-.6855-.281Z"></path>
                            <path d="M122.4582,25.1473h-4.476v-.5822a7.7207,7.7207,0,0,1,1.4517-.4819l5.1009-13.2305h.5847l5.1011,13.2305q.4032.0805.7964.1807a2.85,2.85,0,0,1,.736.3012v.5822h-5.2018v-.5822a8.618,8.618,0,0,1,.8265-.2812q.4234-.12.8267-.2007l-1.3637-3.674h-4.793l-1.3235,3.674a7.3376,7.3376,0,0,1,1.734.4819Zm-.0094-5.7821H126.5l-1.5843-4.2562-.3809-1.7266h-.04l-.5015,1.7667Z"></path>
                            <path d="M105.5118,11.0937h5.5244v.5822q-.4839.1806-.9677.3112a7.0264,7.0264,0,0,1-.9678.1906V24.1033h4.6373l1.19-3.2324h.5242q.06.4217.1109.9738t.0807,1.1443q.03.5923.03,1.1544t-.02,1.0039H105.5118v-.5822a5.2,5.2,0,0,1,.8871-.3213q.4032-.1.7662-.1606V12.1777a7.071,7.071,0,0,1-.8871-.2107,5.8725,5.8725,0,0,1-.7662-.2911Z"></path>
                            <path d="M99.8908,25.1473H94.2252v-.5822q.4433-.16.8973-.2812a9.3689,9.3689,0,0,1,.9779-.2007V12.1376H93.0155L91.947,15.0085h-.5041q-.06-.4012-.1009-.9134t-.07-1.044q-.03-.5318-.05-1.044t-.02-.9134h11.7143q0,.4018-.02.9033t-.051,1.034q-.0307.5323-.0612,1.044t-.0916.9335h-.53l-1.06-2.8709H98.036V24.0832q.5241.1006.9778.2007a4.9777,4.9777,0,0,1,.877.2812Z"></path>
                            <path d="M83.8216,11.0937H88.459v.5822q-.3431.1407-.7259.2711t-.7862.2307l-3.5487,5.4408,4.1334,6.4647a6.3808,6.3808,0,0,1,1.6532.4819v.5822H83.8216v-.5822a5.1074,5.1074,0,0,1,1.5324-.4819L82.1684,19.044l-3.0647,5.0593q.4234.06.8267.1506a2.7992,2.7992,0,0,1,.7863.3112v.5822H76.0593v-.5822a3.7137,3.7137,0,0,1,.756-.3012q.3728-.1.7359-.1807L81.5031,18.08l-3.7906-5.9026q-.4035-.12-.7965-.2408t-.7963-.261v-.5822h5.3429v.5822q-.3023.12-.6754.2409t-.8568.2609l2.8227,4.5374,2.742-4.5374a11.836,11.836,0,0,1-1.6735-.5018Z"></path>
                            <path d="M72.8679,11.0937q-.02.8033-.0707,1.6162T72.646,14.346h-.5241l-.8267-2.2084H66.9v5.32h3.2864l.7865-1.4857h.5039a34.0349,34.0349,0,0,1,0,4.0554h-.5039l-.7865-1.5258H66.9v5.6014H71.537l.988-2.4092h.5042q.1408.8433.2017,1.7065a15.16,15.16,0,0,1,.02,1.7467h-9.94v-.5822a6.7075,6.7075,0,0,1,1.6532-.4819V12.1777a8.1831,8.1831,0,0,1-.8264-.2107q-.4236-.13-.8268-.2911v-.5822Z"></path>
                            <path d="M57.69,25.1473H52.0244v-.5822q.4431-.16.8972-.2812a9.3615,9.3615,0,0,1,.9778-.2007V12.1376H50.8146L49.746,15.0085h-.5041q-.06-.4012-.1007-.9134t-.0706-1.044q-.03-.5318-.05-1.044T49,11.0937H60.7142q0,.4018-.02.9033t-.0511,1.034q-.0307.5323-.061,1.044t-.0918.9335h-.53L58.9,12.1376H55.835V24.0832q.5239.1006.9779.2007a4.98,4.98,0,0,1,.877.2812Z"></path>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div class="auth__table-row">
            <div class="auth__table-cell auth__table-cell_large">
                <!-- Auth Box Content -->
                <div class="auth__box">
                    <div class="auth__actions">
                        <a routerLink="/auth/sign-in" class="auth__action" [class.auth__action_active]="action !== 'sign-up'">{{ 'auth.sign_in__tab' | translate }}</a>
                        <a routerLink="/auth/sign-up" class="auth__action" [class.auth__action_active]="action === 'sign-up'">{{ 'auth.sign_up__tab' | translate }}</a>
                    </div>
                    <div class="auth__content">
                        <sign-in *ngIf="action === 'sign-in'" (onProgressStateChange)="onProgressStateChange($event)" (onAfterSignIn)="onAfterSignIn()"></sign-in>
                        <sign-up *ngIf="action === 'sign-up'" (onProgressStateChange)="onProgressStateChange($event)" (onAfterSignIn)="onAfterSignIn()"></sign-up>
                        <new-password *ngIf="action === 'new-password'" (onProgressStateChange)="onProgressStateChange($event)" (onAfterSignIn)="onAfterSignIn()"></new-password>
                        <forgot-password *ngIf="action === 'forgot-password'" (onProgressStateChange)="onProgressStateChange($event)"></forgot-password>
                        <reset-password *ngIf="action === 'reset-password'" (onProgressStateChange)="onProgressStateChange($event)"></reset-password>
                        <div class="auth__social" *ngIf="action === 'sign-in' || action === 'sign-up'">
                            <button type="button" class="button button_large auth__social-button auth__social-button_facebook" (click)="executeSocialAuth('Facebook')" [disabled]="isBusy">
                                <span class="button__caption">Facebook</span>
                            </button>
                            <button type="button" class="button button_large auth__social-button auth__social-button_google" (click)="executeSocialAuth('Google')" [disabled]="isBusy">
                                <span class="button__caption">Google</span>
                            </button>
                        </div>
                    </div>
                    <div class="auth__form-overlay" *ngIf="isBusy"></div>
                </div>
                <div class="auth__footer">
                    <div class="auth__language" [class.auth__language_active]="isLangMenuActive">
                        <button type="button" class="auth__language-trigger" (click)="toggleLangMenu($event)" [disabled]="isLangMenuDisabled">
                            {{ currentLang.nameKey | translate }}
                        </button>
                        <div class="auth__language-menu">
                            <button type="button" class="auth__language-menu-item" *ngFor="let lang of langs" (click)="onLanguageChange(lang)">
                                <i class="auth__language-menu-item-icon" *ngIf="userData.local.language === lang.code">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14px" height="11px" viewBox="0 0 14 11">
                                        <path fill="currentColor" d="M5,10.4L0.3,5.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0L5,7.6l7.3-7.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4L5,10.4z"></path>
                                    </svg>
                                </i>
                                <span class="auth__language-menu-item-text">
                                    {{ lang.name }} <ng-container *ngIf="userData.local.language !== lang.code">({{ lang.nameKey | translate }})</ng-container>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div class="auth__copyright">
                        <span>Â© {{ year }} OPENLECT LLC</span>
                        <a href="#" (click)="showTerms($event)">{{ 'auth.terms__link' | translate }}</a>
                    </div>
                </div>
                <!-- /Auth Box Content -->
            </div>
        </div>
    </div>
</ng-container>
